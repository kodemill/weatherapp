{"version":3,"sources":["../src/app.js"],"names":[],"mappings":";;;;;;AAAA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AAEA,MAAM,MAAM,mBAAZ;;AAEA;AACA,IAAI,GAAJ,CAAQ,8BAAR;AACA,IAAI,GAAJ,CAAQ,0BAAR;;AAEA;AACA,IAAI,GAAJ,CAAQ,sBAAR;;AAEA;AACA,IAAI,GAAJ,CAAQ,4BAAR;AACA,IAAI,GAAJ,CAAQ,8BAAR;;AAEA;AACA,IAAI,GAAJ,CAAQ,iCAAR;;AAEA;AACA,IAAI,GAAJ,CAAQ,mBAAS,UAAT,EAAR;;AAEA;AACA,IAAI,GAAJ,CAAQ,4BAAW,iBAAO,GAAP,CAAW,YAAtB,CAAR;AACA;AACA;AACA,IAAI,GAAJ,CAAQ,wBAAO,IAAE,iBAAO,GAAP,CAAW,UAAW,GAA/B,EAAkC,yBAAM,iBAAO,GAAP,CAAW,YAAjB,CAAlC,CAAR;;AAEA;AACA,IAAI,GAAJ,CAAQ,sBAAR;;kBAEe,G","file":"app.js","sourcesContent":["import config from '../config';\nimport Koa from 'koa';\nimport passport from './lib/passport';\nimport serve from 'koa-static';\nimport mount from 'koa-mount';\nimport compress from 'koa-compress';\nimport bodyParser from 'koa-bodyparser';\nimport cors from 'kcors';\nimport routes from './route';\nimport logger from 'koa-logger';\nimport { handleError, historySupport, serveIndex } from './middleware';\n\nconst app = new Koa();\n\n// error handling and dev logger\napp.use(handleError());\napp.use(logger());\n\n// cors headers\napp.use(cors());\n\n// I/O middlewares\napp.use(compress());\napp.use(bodyParser());\n\n// hack url for our SPA\napp.use(historySupport());\n\n// auth w/ passport\napp.use(passport.initialize());\n\n// serve authenticated index\napp.use(serveIndex(config.app.publicFolder));\n// serve pub files\n// console.log(`serving /${config.app.publicPath} from directory ${config.app.publicFolder}`)\napp.use(mount(`${config.app.publicPath}`, serve(config.app.publicFolder)));\n\n// routes\napp.use(routes());\n\nexport default app;\n"]}