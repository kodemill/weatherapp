{"version":3,"sources":["../src/app.js"],"names":[],"mappings":";;;;;;AAAA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AAEA,MAAM,MAAM,mBAAZ;;AAEA;AACA,IAAI,GAAJ,CAAQ,8BAAR;AACA,IAAI,CAAC,iBAAO,YAAZ,EAA0B;AACxB,MAAI,GAAJ,CAAQ,0BAAR;AACD;;AAED;AACA,IAAI,GAAJ,CAAQ,sBAAR;;AAEA;AACA,IAAI,GAAJ,CAAQ,4BAAR;AACA,IAAI,GAAJ,CAAQ,8BAAR;;AAEA;AACA,IAAI,GAAJ,CAAQ,iCAAR;;AAEA;AACA,IAAI,GAAJ,CAAQ,mBAAS,UAAT,EAAR;;AAEA;AACA,IAAI,GAAJ,CAAQ,4BAAW,iBAAO,GAAP,CAAW,YAAtB,CAAR;AACA;AACA;AACA,IAAI,GAAJ,CAAQ,wBAAO,IAAE,iBAAO,GAAP,CAAW,UAAW,GAA/B,EAAkC,yBAAM,iBAAO,GAAP,CAAW,YAAjB,CAAlC,CAAR;;AAEA;AACA,IAAI,GAAJ,CAAQ,sBAAR;;kBAEe,G","file":"app.js","sourcesContent":["import config from '../config';\r\nimport Koa from 'koa';\r\nimport passport from './lib/passport';\r\nimport serve from 'koa-static';\r\nimport mount from 'koa-mount';\r\nimport compress from 'koa-compress';\r\nimport bodyParser from 'koa-bodyparser';\r\nimport cors from 'kcors';\r\nimport routes from './route';\r\nimport logger from 'koa-logger';\r\nimport { handleError, historySupport, serveIndex } from './middleware';\r\n\r\nconst app = new Koa();\r\n\r\n// error handling and dev logger\r\napp.use(handleError());\r\nif (!config.isProduction) {\r\n  app.use(logger());\r\n}\r\n\r\n// cors headers\r\napp.use(cors());\r\n\r\n// I/O middlewares\r\napp.use(compress());\r\napp.use(bodyParser());\r\n\r\n// hack url for our SPA\r\napp.use(historySupport());\r\n\r\n// auth w/ passport\r\napp.use(passport.initialize());\r\n\r\n// serve authenticated index\r\napp.use(serveIndex(config.app.publicFolder));\r\n// serve pub files\r\n// console.log(`serving /${config.app.publicPath} from directory ${config.app.publicFolder}`)\r\napp.use(mount(`${config.app.publicPath}`, serve(config.app.publicFolder)));\r\n\r\n// routes\r\napp.use(routes());\r\n\r\nexport default app;\r\n"]}