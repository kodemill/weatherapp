{"version":3,"sources":["../../src/middleware/history-support.js"],"names":[],"mappings":";;;;;;AACA;;;;;;ydADA;;;AAGA,MAAM,cAAc,YAApB;AACA,MAAM,aAAa,IAAI,MAAJ,CAAY,OAAK,iBAAO,GAAP,CAAW,OAAQ,IAApC,CAAnB;;kBAEe;AAAA,+BAAM,WAAO,GAAP,EAAY,IAAZ,EAAqB;AACxC,QAAI,IAAI,MAAJ,CAAW,KAAX,CAAiB,MAAjB,KAA4B,CAAC,YAAY,IAAZ,CAAiB,IAAI,GAArB,CAA7B,IAA0D,CAAC,WAAW,IAAX,CAAgB,IAAI,GAApB,CAA/D,EAAyF;AACvF,cAAQ,GAAR,CAAa,kCAAgC,IAAI,GAAI,kBAArD;AACA,UAAI,GAAJ,GAAU,aAAV;AACD;AACD,UAAM,MAAN;AACD,GANc;;AAAA;AAAA;AAAA;AAAA,I","file":"history-support.js","sourcesContent":["// const fileExtensionRegex = /.(html|js|css|eot|svg|ttf|woff|woff2)$/;\nimport config from '../../config';\n\nconst fileRequest = /\\.\\w{1,5}$/;\nconst apiRequest = new RegExp(`^\\/${config.app.apiPath}/`);\n\nexport default () => async (ctx, next) => {\n  if (ctx.method.match(/GET/i) && !fileRequest.test(ctx.url) && !apiRequest.test(ctx.url)) {\n    console.log(`historySupport - url set from ${ctx.url} to /index.html`);\n    ctx.url = '/index.html';\n  }\n  await next();\n};\n"]}