{"version":3,"sources":["../../src/model/weather-criteria.js"],"names":[],"mappings":";;;;;;AAAA;;;;;;AAEA,MAAM,wBAAwB,qBAAW;AACvC,QAAM;AACJ,UAAM,iBAAO,KAAP,CAAa,QADf;AAEJ,SAAK,MAFD;AAGJ,cAAU,IAHN;AAIJ,WAAO;AAJH,GADiC;AAOvC,QAAM;AACJ,UAAM,MADF;AAEJ,SAAK,MAFD;AAGJ,cAAU,IAHN;AAIJ,WAAO;AAJH,GAPiC;AAavC,eAAa;AACX,UAAM,MADK;AAEX,cAAU;AAFC,GAb0B;AAiBvC,aAAW;AACT,UAAM,MADG;AAET,UAAM,CAAC,SAAD,EAAY,MAAZ,CAFG;AAGT,aAAS,SAHA;AAIT,cAAU;AAJD,GAjB4B;AAuBvC,eAAa;AACX,UAAM;AADK,GAvB0B;AA0BvC,mBAAiB;AACf,UAAM;AADS;AA1BsB,CAAX,EA6B3B;AACD;AACA,cAAY;AAFX,CA7B2B,CAA9B;;AAkCA,sBAAsB,OAAtB,CAA8B,0BAA9B,GAA2D,UAAU,WAAV,EAAuB;AAChF,UAAQ,KAAK,SAAb;AACE,SAAK,SAAL;AACE,aAAO,eAAe,KAAK,WAA3B;AACF,SAAK,MAAL;AACE,aAAO,eAAe,KAAK,WAA3B;AACF;AAAS,aAAO,KAAP;AALX;AAOD,CARD;;AAUA,sBAAsB,GAAtB,CAA0B,QAA1B,EAAoC;AAClC,aAAW,CAAC,GAAD,EAAM,GAAN,KAAc;AACvB,QAAI,EAAJ,GAAS,IAAI,GAAb;AACA,WAAO,IAAI,GAAX;AACA,WAAO,IAAI,GAAX;AACD;AALiC,CAApC;;kBASe,mBAAS,KAAT,CAAe,iBAAf,EAAkC,qBAAlC,C","file":"weather-criteria.js","sourcesContent":["import mongoose, { Schema } from 'mongoose';\n\nconst WeatherCriteriaSchema = new Schema({\n  user: {\n    type: Schema.Types.ObjectId,\n    ref: 'User',\n    required: true,\n    index: true,\n  },\n  city: {\n    type: Number,\n    ref: 'City',\n    required: true,\n    index: true,\n  },\n  temperature: {\n    type: Number,\n    required: true,\n  },\n  predicate: {\n    type: String,\n    enum: ['greater', 'less'],\n    default: 'greater',\n    required: true,\n  },\n  fulfilledAt: {\n    type: Date,\n  },\n  acknoweledgedAt: {\n    type: Date,\n  },\n}, {\n  // createdAt and updatedAt\n  timestamps: true,\n});\n\nWeatherCriteriaSchema.methods.isFulfilledWithTemperature = function (temperature) {\n  switch (this.predicate) {\n    case 'greater':\n      return temperature >= this.temperature;\n    case 'less':\n      return temperature <= this.temperature;\n    default: return false;\n  }\n};\n\nWeatherCriteriaSchema.set('toJSON', {\n  transform: (doc, ret) => {\n    ret.id = doc._id;\n    delete ret._id;\n    delete ret.__v;\n  },\n});\n\n\nexport default mongoose.model('WeatherCriteria', WeatherCriteriaSchema);\n"]}