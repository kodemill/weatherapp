{"version":3,"sources":["../../src/controller/weather.js"],"names":[],"mappings":";;;;;;AAAA;;;;AACA;;;;AACA;;;;;;;;AAEA,MAAM;AAAA,+BAAiC,aAAY;AACjD,UAAM,kBAAkB,MAAM,0BAAI,aAAJ,EAA9B;AACA,UAAM,kBAAkB,MAAM,4BAC5B,gBAAgB,GAAhB,CAAoB;AAAA,aAAY,SAAS,IAArB;AAAA,KAApB,CAD4B,CAA9B;AAEA,UAAM,iBAAiB,MAAM,wBAAI,mBAAJ,CAAwB,eAAxB,CAA7B;AACA,WAAO,CAAC,MAAM,0BAAI,qBAAJ,CAA0B,eAA1B,EAA2C,cAA3C,CAAP,EAAmE,cAAnE,CAAP;AACD,GANK;;AAAA;AAAA;AAAA;AAAA,IAAN;;kBAQe;AACb;AADa,C","file":"weather.js","sourcesContent":["import WCC from '../controller/weather-criteria';\r\nimport WRC from '../controller/weather-report';\r\nimport fetchWeather from '../lib/fetch-weather';\r\n\r\nconst fetchWeatherAndUpdateDocuments = async () => {\r\n  const pendingCriteria = await WCC.getAllPending();\r\n  const weatherResponse = await fetchWeather(\r\n    pendingCriteria.map(criteria => criteria.city));\r\n  const weatherReports = await WRC.saveAllFromResponse(weatherResponse);\r\n  return [await WCC.tryFulfillFromReports(pendingCriteria, weatherReports), weatherReports];\r\n};\r\n\r\nexport default {\r\n  fetchWeatherAndUpdateDocuments,\r\n};\r\n"]}