{"version":3,"sources":["../../src/lib/fetch-weather.js"],"names":[],"mappings":";;;;;;AAAA;;;;AACA;;AACA;;;;;;;;AAEA,MAAM,UAAU,yCAAhB;AACA,MAAM,mBAAmB,WAAY,aAAW,QAAQ,IAAR,CAAa,GAAb,CAAkB,GAAlE;AACA,MAAM,sBAAsB,WACzB,IAAE,OAAQ,KAAE,iBAAiB,OAAjB,CAA0B,yBAAsB,aAAK,oBAAqB,GADzF;;AAGA,MAAM;AAAA,+BAAW,WAAM,OAAN,EAAiB;AAChC,UAAM,gBAAgB,MAAM,OAAN,CAAc,OAAd,IAAyB,oBAAK,OAAL,CAAzB,GAAyC,CAAC,OAAD,CAA/D;AACA,UAAM,WAAW,MAAM,yBAAM,oBAAoB,aAApB,CAAN,CAAvB;AACA,QAAI,SAAS,EAAb,EAAiB;AACf,aAAO,MAAM,SAAS,IAAT,EAAb;AACD;AACD,UAAM,IAAI,KAAJ,CAAU,gCAAV,CAAN;AACD,GAPK;;AAAA;AAAA;AAAA;AAAA,IAAN;;kBASe,Q","file":"fetch-weather.js","sourcesContent":["import fetch from 'node-fetch';\r\nimport { auth } from '../../config';\r\nimport uniq from 'lodash/uniq';\r\n\r\nconst baseUrl = 'http://api.openweathermap.org/data/2.5/';\r\nconst createGroupParam = cityIds => `group?id=${cityIds.join(',')}`;\r\nconst createGroupQueryUrl = cityIds =>\r\n  `${baseUrl}${createGroupParam(cityIds)}&units=metric&appid=${auth.openWeatherMapApiKey}`;\r\n\r\nconst getGroup = async cityIds => {\r\n  const citiesToCheck = Array.isArray(cityIds) ? uniq(cityIds) : [cityIds];\r\n  const response = await fetch(createGroupQueryUrl(citiesToCheck));\r\n  if (response.ok) {\r\n    return await response.json();\r\n  }\r\n  throw new Error('smg went wrong during api call');\r\n};\r\n\r\nexport default getGroup;\r\n"]}